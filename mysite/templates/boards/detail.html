{% extends "../account_pages/base.html" %}
{% block title %} {{board.board_title}} {% endblock %}
{% block content %}
    <h2>
        {{board.board_title}}
        <div class="dropdown show" style="display: inline-block;">
            <a class="btn btn-link settings-link" href="#" role="button" id="dropdownSettingsBoard" data-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-cog" aria-hidden="true"></i>
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownSettingsBoard">
                <a class="dropdown-item" href="/boards/edit_board/{{board.id}}">Edit board <i class="fa fa-pencil" aria-hidden="true"></i></a>
                <a class="dropdown-item" href="/boards/delete_board/{{board.id}}">Delete board <i class="fa fa-trash" aria-hidden="true"></i></a>
            </div>
        </div>
    </h2>
    <p>
        <a class="btn btn-primary" href="/columns/create_column/{{board.id}}">Create new column</a>
    </p>
    {% for column in board.column.all %}
        <div class="column-block">
            <div class="column-title-block" data-toggle="collapse" aria-expanded="false" data-target="#multiCollapse{{column.id}}">
                <a class="column-title" href="#">{{column.column_title}}</a>
                <div class="dropdown show" style="display: inline-block;">
                    <a class="settings-link" href="#" role="button" id="dropdownSettingsColumn" data-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-cog" aria-hidden="true"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownSettingsColumn">
                        <a class="dropdown-item" href="columns/edit_column/{{column.id}}/{{board.id}}">Edit column <i class="fa fa-pencil" aria-hidden="true"></i></a>
                        <a class="dropdown-item" href="columns/delete_column/{{column.id}}/{{board.id}}">Delete column <i class="fa fa-trash" aria-hidden="true"></i></a>
                        <a class="dropdown-item" href="tasks/create_task/{{column.id}}/{{board.id}}">
                            Create new task <i class="fa fa-plus-circle" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="collapse multi-collapse" id="multiCollapse{{column.id}}">
                {% for task in column.task.all %}
                    <a class="task-title" href="#"
                       onclick="showTaskInfo({'title':'{{task.title}}', 'author':'{{task.author}}', 'pub_date':'{{task.pub_date}}', 'lead_time':'{{task.lead_time}}', 'work_id' : '{{task.id}}/{{column.id}}/{{board.id}}'})">
                        {{task.title}}
                    </a>
                    Выполнено ли: {{task.is_completed}}
                    {% if task.is_completed %}
                        <p>ВЫПОЛНЕНО</p>
<!--                        Что-то сюда вставить можно или как-то использовать эту конструкцию-->
                    {% else %}
                        <p>НЕВЫПОЛНЕНО</p>
                        <a href="tasks/complete_task/{{task.id}}/{{column.id}}/{{board.id}}" role="button" class="btn btn-link">Пометить как выполненное</a>
                    {% endif %}

                {% endfor %}
            </div>
        </div>
    {% endfor %}

    {% load static %}
    <script src="{% static 'js/taskInfo.js' %}"></script>

    <div id="taskModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Task title</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <h6 class="bg-info text-center text-light lead_time">до 21 июля 2020</h6>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <h6>Описание</h6>
                            <p class="text-secondary">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sit amet aliquet urna, ac elementum dolor. Morbi tincidunt nec est commodo commodo. Vivamus mauris lorem, maximus ut arcu ac, commodo iaculis magna.
                            </p>
                            <h6>Комментарии</h6>
                            <p>
                                <form class="form" method="post">
                                    <div class="form-group">
                                        <textarea class="form-control" placeholder="Ваш комментарий" rows="3"></textarea>
                                    </div>
                                    <div class="text-right">
                                        <input type="submit" class="btn btn-primary">
                                    </div>
                                </form>
                            </p>
                            <div class="comment">
                                <h6><a href="#" class="primary-link">@kalim</a></h6>
                                <p class="text-secondary">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                </p>
                            </div>
                            <div class="comment">
                                <h6><a href="#" class="primary-link">@login</a></h6>
                                <p class="text-secondary">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                </p>
                            </div>
                            <br>
                        </div>
                        <div class="col-sm-4">
                            <h6>Участники</h6>
                            <a class="primary-link" href="#">@kalim</a><br>
                            <a class="primary-link" href="#">@login</a>
                            <hr>
                            <h6>Автор</h6>
                            <p><a class="primary-link author" href="#">@kalim</a></p>
                            <h6>Дата создания</h6>
                            <p class="pub_date">16.06.2019</p>
                            <hr>
                            <p class="text-center">
                                <a href="#" role="button" class="btn btn-link">Пометить как выполненное</a>
                            </p>
                            <hr>
                            <p>
                                <a href="tasks/edit_task/{{task.id}}/{{column.id}}/{{board.id}}" role="button" class="btn btn-dark edit">Редактировать</a>
                            </p>
                            <a href="tasks/delete_task/{{task.id}}/{{column.id}}/{{board.id}}" role="button" class="btn btn-danger delete">Удалить</a>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"></div>
            </div>
        </div>
    </div>
{% endblock %}
